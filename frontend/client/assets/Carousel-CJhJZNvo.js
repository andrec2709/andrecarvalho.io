import{p as e,a as m}from"./chunk-4WY6JWTD-BofTOlw4.js";import{G as P}from"./GithubIcon-Urb6WT-v.js";import{u as $}from"./LangContext-c_m5yGnp.js";import{D as q}from"./DropdownIcon-CTNpqADW.js";import{r as L}from"./index-D4px5Yjy.js";import{H as S}from"./logo-Bx8MpSvq.js";const X=({className:i,hoverText:u})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -960 960 960","aria-label":"click to open link",className:`w-6 aspect-square cursor-pointer hover:scale-150 transition-transform duration-100 ease ${i}`,children:[e.jsx("title",{children:u}),e.jsx("path",{d:"M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h560v-280h80v280q0 33-23.5 56.5T760-120H200Zm188-212-56-56 372-372H560v-80h280v280h-80v-144L388-332Z"})]}),C=({className:i,id:u,repoData:c})=>{const{translations:l,currentLang:d}=$(),R=d==="pt"?"Descrição não disponível":"No description available";let f=c?.description??R;f=f.length<50?f:f.substring(0,50)+"...";const p=new Date(c.updated_at),x=d==="pt"?"pt-BR":"en-US",g=p.toLocaleString(x,{month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:`card-item w-[220px] h-[350px] relative select-none border border-card-border shrink-0 snap-center flex flex-col p-4 bg-card-background text-card-on-background rounded-xl transition-transform duration-200 ease shadow-[2px_2px_6px_rgba(0,0,0,0.2)] hover:scale-105 ${i}`,id:u,children:[e.jsxs("div",{className:"card-section",children:[e.jsx("h2",{className:"card-heading",children:l?.cards.project}),e.jsx("p",{className:"card-text",children:c?.repo_name})]}),e.jsxs("div",{className:"card-section",children:[e.jsx("h2",{className:"card-heading",children:l?.cards.description}),e.jsx("p",{className:"card-text",children:f})]}),e.jsxs("div",{className:"card-section",children:[e.jsx("h2",{className:"card-heading",children:l?.cards.commits}),e.jsx("p",{className:"card-text",children:c?.commits})]}),e.jsxs("div",{className:"card-section",children:[e.jsx("h2",{className:"card-heading",children:l?.cards.updated_at}),e.jsx("p",{className:"card-text",children:g})]}),e.jsx(P,{className:"self-center mt-auto select-none aspect-square"}),e.jsx("a",{className:"absolute self-end w-fit",href:`https://github.com/andrec2709/${c.repo_name}`,target:"_blank",children:e.jsx(X,{className:"fill-card-links",hoverText:l?.cards.hover_txt})})]})},A=async()=>{const c=await(await fetch("/api/GetReposInfo.php")).json();return c.sort((l,d)=>d.commits-l.commits),c},O=()=>{const i=m.useRef(null),u=m.useRef(null),c=m.useRef(0),l=m.useRef(10),[d,R]=m.useState(null),{translations:f}=$();m.useEffect(()=>{(async()=>{let t=(await A()).map((j,N)=>{const h=L({id:!0});return e.jsx(C,{id:h,repoData:j},h)}),n=L({id:!0}),a=t[0];a=e.jsx(C,{id:n,repoData:a.props.repoData},n),n=L({id:!0});let o=t[t.length-1];o=e.jsx(C,{id:n,repoData:o.props.repoData},n),t.splice(0,0,o),t.push(a),R(t)})()},[]);const p=m.useRef([]),x=s=>{const r=i.current,t=p.current;if(!t||!r)return;const n=t.map(o=>o.index===s?{...o,active:!0}:{...o,active:!1});p.current=n;const a=n[s];r.style.transform=`translateX(${a.centerWith}px)`},g=s=>{const r=i.current,t=p.current;!r||!t||(r.classList.replace("transition-transform","transition-none"),x(s?t.length-1:0))},w=s=>{const r=p.current,t=i.current;if(!r||!t)return;let n=1;r.forEach(o=>{o.active&&(n=o.index)});let a;s?n-1<1?(a=r.length-2,g(!0)):a=n-1:n+1>r.length-2?(a=1,g(!1)):a=n+1,requestAnimationFrame(()=>{requestAnimationFrame(()=>{t.classList.replace("transition-none","transition-transform"),x(a)})})},y=s=>{let r=!1;s&&(r=!0);const t=i.current,n=u.current;if(!t||!n||!d)return;const a=parseInt(getComputedStyle(t).columnGap.replace("px","")),j=n.getBoundingClientRect().width,N=[];let h=d.length-1>=2?2:1;r&&p.current.forEach(v=>{v.active&&(h=v.index)}),d.forEach((v,k)=>{if(!v)return;const D=v.props.id,E=document.getElementById(D);if(!E)return;const T=E.getBoundingClientRect().width,_=E.offsetLeft,H=-_+j/2-T/2;N.push({id:D,index:k,width:T,parentSpacing:a,offsetLeft:_,centerWith:H,carouselWidth:j,active:k===h})}),p.current=N;const B=N[h];t.style.transform=`translateX(${B.centerWith}px)`},I=s=>{s.target.setPointerCapture(s.pointerId),c.current=s.clientX},b=s=>{const r=s.clientX,t=c.current,n=t+l.current,a=t-l.current;r>=a&&r<=n||(r>c.current?w(!0):w(!1))};return m.useEffect(()=>{y(),window.addEventListener("resize",y);const s=u.current;if(s)return s.addEventListener("pointerdown",I),s.addEventListener("pointerup",b),()=>{window.removeEventListener("resize",y),s.removeEventListener("pointerdown",I),s.removeEventListener("pointerup",b)}},[d]),e.jsxs("div",{className:"carousel-container flex flex-col relative items-center justify-center",role:"complementary",children:[e.jsx(S,{className:"self-start",id:"projects",children:f?.words.projects}),e.jsx("div",{className:"carousel flex items-center text-white touch-pan-y h-[400px] w-full overflow-hidden",ref:u,children:e.jsx("div",{className:"cards-wrapper flex gap-x-10 relative h-full items-center transition-transform duration-200 ease",ref:i,children:d})}),e.jsxs("div",{className:"flex gap-x-1 items-center justify-end w-full",children:[e.jsx("button",{className:"w-10 flex items-center justify-center cursor-pointer hover:scale-120 transition-transform duration-100 ease",onClick:()=>w(!0),children:e.jsx(q,{className:"-rotate-90"})}),e.jsx("button",{className:"w-10 flex items-center justify-center cursor-pointer hover:scale-120 transition-transform duration-100 ease",onClick:()=>w(!1),children:e.jsx(q,{className:"rotate-90"})})]})]})};export{O as C};
